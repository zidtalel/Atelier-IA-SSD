<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Section 2 : Ma√Ætriser le Prompt Engineering pour la QA</title>
    <link rel="stylesheet" href="../assets/style.css" />
  </head>
  <body>
    <nav>
      <a href="../../index.html">üè† Accueil</a>
      <a href="../section-1/index.html">Section 1</a>
      <a href="../section-2/index.html" class="active">Section 2</a>
      <a href="../section-3/index.html">Section 3</a>
      <a href="../section-4/index.html">Section 4</a>
    </nav>

    <header>
      <h1>üéØ Section 2 : Ma√Ætriser le Prompt Engineering pour la QA</h1>
      <p class="subtitle">Dur√©e : 90 minutes</p>
    </header>

    <div class="container">
      <section class="hero">
        <h2>üéì Objectifs de cette Section</h2>
        <div class="grid">
          <div class="card">
            <h3>üìê Anatomie</h3>
            <p>
              Comprendre les 5 composantes essentielles d'un prompt efficace
            </p>
          </div>
          <div class="card">
            <h3>üöÄ Techniques Avanc√©es</h3>
            <p>Ma√Ætriser Chain-of-Thought, Few-Shot et Prompt Chaining</p>
          </div>
          <div class="card">
            <h3>üß™ G√©n√©ration de Tests</h3>
            <p>
              G√©n√©rer des sc√©narios Gherkin, scripts Cypress et donn√©es de test
            </p>
          </div>
          <div class="card">
            <h3>üîç Debugging</h3>
            <p>
              Analyser les logs, d√©boguer les tests flaky et √©valuer la
              robustesse
            </p>
          </div>
        </div>
      </section>

      <!-- MODULE 2.1 : ANATOMIE D'UN PROMPT EFFICACE -->
      <section class="mt-xl">
        <h2>üìê Module 2.1 : Anatomie d'un Prompt Efficace (20 min)</h2>

        <div class="card highlight">
          <h3>Les 5 Composantes Essentielles</h3>
          <p>
            Un prompt de qualit√© professionnelle se compose de 5 √©l√©ments
            structurants :
          </p>
          <table>
            <thead>
              <tr>
                <th>Composante</th>
                <th>Description</th>
                <th>Exemple</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>üîµ <strong>R√¥le</strong></td>
                <td>D√©finit l'expertise et le contexte professionnel</td>
                <td>"Tu es un ing√©nieur QA senior sp√©cialis√© en tests E2E"</td>
              </tr>
              <tr>
                <td>üü¢ <strong>T√¢che</strong></td>
                <td>L'action pr√©cise √† r√©aliser</td>
                <td>"G√©n√®re un test Cypress pour la connexion Redmine"</td>
              </tr>
              <tr>
                <td>üü° <strong>Contexte</strong></td>
                <td>Informations techniques n√©cessaires</td>
                <td>"TypeScript, Page Object Model, API REST Redmine"</td>
              </tr>
              <tr>
                <td>üî¥ <strong>Contraintes</strong></td>
                <td>R√®gles et limites √† respecter</td>
                <td>"Utilise uniquement data-test-id, pas de XPath"</td>
              </tr>
              <tr>
                <td>üü£ <strong>Format</strong></td>
                <td>Structure de sortie attendue</td>
                <td>"Format JSON avec cl√©s : iban, valide, raison"</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 2.1.A : R√îLE/PERSONA -->
        <div class="card success mt-lg">
          <h3>A. R√¥le/Persona : L'Impact du Contexte Professionnel</h3>
          <p>
            D√©finir le r√¥le transforme radicalement la qualit√© et la pertinence
            de la r√©ponse. Observons la diff√©rence :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå Prompt Basique (Sans R√¥le)</h4>
              <p><em>"Cr√©e un test pour la page de connexion Redmine"</em></p>
              <ul>
                <li>R√©ponse g√©n√©rique</li>
                <li>S√©lecteurs CSS fragiles (#username)</li>
                <li>Pas de bonnes pratiques</li>
                <li>Code non idiomatique</li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ Prompt Structur√© (Avec R√¥le)</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Structur√© avec les 5 Composantes
              </button>
              <div class="collapsible-content">
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E. Tu ma√Ætrises parfaitement
                    Cypress, TypeScript et le Page Object Model.
                  </p>
                </div>

                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    G√©n√®re une classe Page Object TypeScript compl√®te pour la
                    page de connexion de l'application Redmine avec toutes les
                    m√©thodes d'interaction n√©cessaires.
                  </p>
                </div>

                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    Contexte : Cypress + TypeScript, API Redmine, Page Object
                    Model.
                  </p>
                  <p>
                    <strong
                      >Voici le code HTML r√©el du formulaire de connexion
                      :</strong
                    >
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      color: #d4d4d4;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                    "
                  ><code>&lt;form onsubmit="return keepAnchorOnSignIn(this);" action="/login" method="post"&gt;
  &lt;input type="hidden" name="authenticity_token" value="..." /&gt;
  &lt;label for="username"&gt;Identifiant&lt;/label&gt;
  &lt;input type="text" name="username" id="username" tabindex="1" /&gt;
  &lt;label for="password"&gt;Mot de passe&lt;/label&gt;
  &lt;input type="password" name="password" id="password" tabindex="2" /&gt;
  &lt;input type="checkbox" name="autologin" id="autologin" value="1" /&gt; Rester connect√©
  &lt;input type="submit" id="login-submit" value="Connexion" tabindex="5" /&gt;
&lt;/form&gt;</code></pre>
                </div>

                <div
                  style="
                    background: #ffebee;
                    border-left: 4px solid #f44336;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üî¥ Contraintes</h4>
                  <ul>
                    <li>
                      Utilise <strong>UNIQUEMENT</strong> les attributs
                      <code>id</code> natifs pour les s√©lecteurs
                    </li>
                    <li>
                      Jamais de XPath, de s√©lecteurs CSS complexes ou de texte
                      visible
                    </li>
                    <li>Applique le pattern Page Object Model strict</li>
                    <li>M√©thodes chainables (retournent <code>this</code>)</li>
                    <li>Gestion des erreurs avec messages explicites</li>
                  </ul>
                </div>

                <div
                  style="
                    background: #f3e5f5;
                    border-left: 4px solid #9c27b0;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü£ Format</h4>
                  <p>Code TypeScript complet avec :</p>
                  <ul>
                    <li>Classe <code>LoginPage</code> export√©e</li>
                    <li>S√©lecteurs priv√©s en haut</li>
                    <li>
                      M√©thodes publiques : <code>visit()</code>,
                      <code>fillUsername()</code>, <code>fillPassword()</code>,
                      <code>submit()</code>
                    </li>
                    <li>JSDoc pour chaque m√©thode</li>
                  </ul>
                </div>
              </div>

              <p class="mt-md"><strong>R√©sultat :</strong></p>
              <ul>
                <li>Code professionnel idiomatique</li>
                <li>S√©lecteurs robustes (id natifs)</li>
                <li>Architecture POM respect√©e</li>
                <li>Documentation JSDoc compl√®te</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- 2.1.B : T√ÇCHE -->
        <div class="card mt-lg">
          <h3>B. T√¢che : La Clart√© de l'Intention</h3>
          <p>
            Une t√¢che bien formul√©e est
            <strong>sp√©cifique, mesurable et actionnable</strong>. La diff√©rence
            entre une demande vague et une t√¢che claire :
          </p>

          <div class="grid mt-md">
            <div>
              <h4>‚ùå T√¢ches Mal Formul√©es</h4>
              <ul class="warning-list">
                <li>"Fais un truc pour tester la connexion"</li>
                <li>"Am√©liore mes tests"</li>
                <li>"G√©n√®re du code de test"</li>
                <li>"Aide-moi avec Cypress"</li>
              </ul>
              <p class="text-muted">
                <em>Trop vague, pas d'objectif clair, r√©sultat impr√©visible</em>
              </p>
            </div>

            <div>
              <h4>‚úÖ T√¢ches Bien Formul√©es</h4>
              <ul class="success-list">
                <li>
                  "G√©n√®re un test E2E Cypress qui valide le workflow complet de
                  virement bancaire"
                </li>
                <li>
                  "Cr√©e une factory TypeScript pour g√©n√©rer 20 IBANs fran√ßais
                  valides avec checksum correct"
                </li>
                <li>
                  "√âcris 5 sc√©narios Gherkin couvrant les cas limites de
                  validation de montant (n√©gatif, z√©ro, >1M‚Ç¨)"
                </li>
                <li>
                  "Analyse ce log de 50 lignes et identifie la cause racine de
                  l'erreur 500"
                </li>
              </ul>
              <p class="text-success">
                <em>Sp√©cifique, mesurable, contextualis√©</em>
              </p>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üí° Formule Gagnante pour une T√¢che Claire</h4>
            <p>
              <strong
                >Verbe d'action + Livrable pr√©cis + Crit√®res de succ√®s</strong
              >
            </p>
            <ul>
              <li>
                <strong>Verbe :</strong> G√©n√®re, Cr√©e, Analyse, Identifie,
                Corrige, √âvalue
              </li>
              <li>
                <strong>Livrable :</strong> Type exact (test E2E, sc√©nario
                Gherkin, factory, classe POM)
              </li>
              <li>
                <strong>Crit√®res :</strong> Nombre, format, contraintes (20
                IBANs, format JSON, pas de XPath)
              </li>
            </ul>
          </div>
        </div>

        <!-- 2.1.C : CONTEXTE -->
        <div class="card mt-lg">
          <h3>C. Contexte : Le Carburant de la Pr√©cision</h3>
          <p>
            Le contexte transforme une r√©ponse g√©n√©rique en solution sur-mesure.
            Plus vous fournissez de contexte technique, meilleure sera la
            qualit√© du code g√©n√©r√©.
          </p>

          <h4 class="mt-md">üéØ Types de Contexte √† Fournir</h4>
          <div class="grid mt-md">
            <div class="card">
              <h4>üèóÔ∏è Architecture</h4>
              <ul>
                <li>Framework : Cypress, Playwright, Selenium</li>
                <li>Langage : TypeScript, JavaScript, Python</li>
                <li>Pattern : Page Object Model, Screenplay</li>
              </ul>
            </div>

            <div class="card">
              <h4>üîß Configuration</h4>
              <ul>
                <li>Fichiers : tsconfig.json, cypress.config.ts</li>
                <li>Plugins : @testing-library, faker</li>
                <li>Conventions : naming, structure de dossiers</li>
              </ul>
            </div>

            <div class="card">
              <h4>üåê Application</h4>
              <ul>
                <li>Structure HTML r√©elle (comme vu en 2.1.A)</li>
                <li>API endpoints et payloads</li>
                <li>R√®gles m√©tier (IBAN format, limites montants)</li>
              </ul>
            </div>

            <div class="card">
              <h4>üìö Standards</h4>
              <ul>
                <li>Guidelines projet (s√©lecteurs data-test-id)</li>
                <li>Normes s√©curit√© (PCI DSS, GDPR)</li>
                <li>Formats attendus (ISO 8601 dates)</li>
              </ul>
            </div>
          </div>

          <div class="card warning mt-md">
            <h4>‚ö†Ô∏è Erreur Courante : Contexte Implicite</h4>
            <p>
              Ne pr√©sumez jamais que l'IA conna√Æt votre environnement. Exemple :
            </p>
            <ul>
              <li>
                ‚ùå "G√©n√®re un test pour le virement" ‚Üí L'IA ne conna√Æt pas votre
                structure HTML
              </li>
              <li>
                ‚úÖ "G√©n√®re un test pour le virement. Voici le formulaire HTML :
                &lt;form&gt;...&lt;/form&gt;" ‚Üí S√©lecteurs pr√©cis garantis
              </li>
            </ul>
          </div>
        </div>

        <!-- 2.1.D : CONTRAINTES -->
        <div class="card mt-lg">
          <h3>D. Contraintes : Le Garde-Fou de la Qualit√©</h3>
          <p>
            Les contraintes transforment du code fonctionnel en code
            <strong>maintenable, s√©curis√© et conforme</strong>. Elles guident
            l'IA vers les meilleures pratiques de votre √©quipe.
          </p>

          <h4 class="mt-md">üìã Cat√©gories de Contraintes Efficaces</h4>

          <div class="card info mt-md">
            <h4>üéØ Contraintes Techniques</h4>
            <ul>
              <li>
                <strong>S√©lecteurs :</strong> "Utilise UNIQUEMENT data-test-id,
                jamais de XPath ou CSS complexes"
              </li>
              <li>
                <strong>Versioning :</strong> "Compatible TypeScript 5.0+,
                Cypress 13.x"
              </li>
              <li>
                <strong>Performance :</strong> "Temps d'ex√©cution &lt; 5s, pas
                de cy.wait() hardcod√©s"
              </li>
              <li>
                <strong>D√©pendances :</strong> "N'utilise que les librairies
                d√©j√† pr√©sentes (faker, dayjs)"
              </li>
            </ul>
          </div>

          <div class="card info mt-md">
            <h4>üîí Contraintes S√©curit√©/Conformit√©</h4>
            <ul>
              <li>
                <strong>Donn√©es :</strong> "Aucune vraie donn√©e PII, utilise
                faker.js pour g√©n√©rer des fakes"
              </li>
              <li>
                <strong>Credentials :</strong> "Charge les secrets depuis
                Cypress.env(), jamais en dur"
              </li>
              <li>
                <strong>RGPD :</strong> "Pas de logs contenant emails ou num√©ros
                IBAN r√©els"
              </li>
              <li>
                <strong>PCI DSS :</strong> "Pas de num√©ros de carte en clair
                dans les fixtures"
              </li>
            </ul>
          </div>

          <div class="card info mt-md">
            <h4>üèóÔ∏è Contraintes Architecturales</h4>
            <ul>
              <li>
                <strong>Pattern :</strong> "Respecte strictement le Page Object
                Model : s√©lecteurs priv√©s, m√©thodes chainables"
              </li>
              <li>
                <strong>Structure :</strong> "Place les POM dans
                /cypress/support/pages/, les tests dans /cypress/e2e/"
              </li>
              <li>
                <strong>Naming :</strong> "Pr√©fixe 'should' pour assertions,
                'get' pour s√©lecteurs"
              </li>
            </ul>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ Exemple Complet de Contraintes</h4>
            <pre
              style="background: #f5f5f5; padding: 1rem; border-radius: 4px"
            ><code>Contraintes :
- S√©lecteurs : UNIQUEMENT [data-test-id], jamais #id ou .class
- Pattern : Page Object Model strict (m√©thodes chainables)
- S√©curit√© : Credentials via Cypress.env('ADMIN_PASSWORD')
- Performance : Pas de cy.wait(5000), utilise cy.intercept() + alias
- Tests : Arrange-Act-Assert clairement s√©par√© par commentaires
- Assertions : Minimum 3 assertions par test (UI + API + DB si applicable)
- Cleanup : Toujours teardown via API en afterEach()</code></pre>
          </div>
        </div>

        <!-- 2.1.E : FORMAT -->
        <div class="card mt-lg">
          <h3>E. Format : La Structure de Sortie</h3>
          <p>
            Sp√©cifier le format de sortie garantit un r√©sultat
            <strong>directement exploitable</strong> sans post-traitement
            manuel.
          </p>

          <h4 class="mt-md">üé® Formats Courants en QA</h4>

          <div class="grid mt-md">
            <div class="card">
              <h4>üìù Gherkin (BDD)</h4>
              <pre
                style="
                  background: #f5f5f5;
                  padding: 1rem;
                  border-radius: 4px;
                  font-size: 0.9em;
                "
              ><code>Format attendu :
@tag-jira @priorite-haute
Fonctionnalit√©: [Titre]
  
Contexte:
  √âtant donn√© [pr√©condition]

Sc√©nario: [Nom du cas]
  Quand [action]
  Alors [r√©sultat attendu]</code></pre>
            </div>

            <div class="card">
              <h4>üß™ TypeScript (Cypress)</h4>
              <pre
                style="
                  background: #f5f5f5;
                  padding: 1rem;
                  border-radius: 4px;
                  font-size: 0.9em;
                "
              ><code>Format attendu :
describe('Feature', () => {
  beforeEach(() => {
    // Setup
  });

  it('should [behavior]', () => {
    // Arrange
    // Act
    // Assert
  });
});</code></pre>
            </div>

            <div class="card">
              <h4>üìä JSON (Donn√©es)</h4>
              <pre
                style="
                  background: #f5f5f5;
                  padding: 1rem;
                  border-radius: 4px;
                  font-size: 0.9em;
                "
              ><code>Format attendu :
{
  "iban": "FR76...",
  "valide": true,
  "raison": "Checksum OK",
  "pays": "France"
}</code></pre>
            </div>

            <div class="card">
              <h4>üìã Markdown (Rapport)</h4>
              <pre
                style="
                  background: #f5f5f5;
                  padding: 1rem;
                  border-radius: 4px;
                  font-size: 0.9em;
                "
              ><code>Format attendu :
# Analyse Bug #1234

## Sympt√¥mes
- [Liste]

## Cause Racine
[Explication]

## Solution Propos√©e
[Code fix]</code></pre>
            </div>
          </div>

          <div class="card warning mt-md">
            <h4>‚ö†Ô∏è Pr√©cision du Format</h4>
            <p>Plus le format est d√©taill√©, meilleur est le r√©sultat :</p>
            <ul>
              <li>‚ùå "Format JSON" ‚Üí Structure inconnue</li>
              <li>
                ‚úÖ "Format JSON avec cl√©s obligatoires : iban (string), valide
                (boolean), raison (string), pays (string)" ‚Üí Structure garantie
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- MODULE 2.2 : LES 3 TECHNIQUES AVANC√âES -->
      <section class="mt-xl">
        <h2>üöÄ Module 2.2 : Les 3 Techniques Avanc√©es (30 min)</h2>

        <!-- 2.2.A : CHAIN-OF-THOUGHT -->
        <div class="card mt-lg">
          <h3>A. Chain-of-Thought : La Pens√©e Logique Explicite</h3>
          <p>
            Le Chain-of-Thought (CoT) demande √† l'IA d'<strong
              >expliciter son raisonnement √©tape par √©tape</strong
            >
            avant de fournir la r√©ponse finale. Crucial pour les probl√®mes
            complexes n√©cessitant une analyse multi-√©tapes.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Chain-of-Thought ?</h4>
            <ul>
              <li>Analyser des logs complexes avec √©v√©nements corr√©l√©s</li>
              <li>D√©boguer des tests flaky n√©cessitant analyse de timing</li>
              <li>
                Identifier des causes racines dans des incidents
                multi-composants
              </li>
              <li>
                √âvaluer la robustesse de s√©lecteurs face aux changements UI
              </li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : Analyse de Logs Redmine</h4>
          <button class="collapsible-btn" onclick="toggleCollapsible(this)">
            üìã Voir le Prompt Chain-of-Thought + Logs
          </button>
          <div class="collapsible-content">
            <div
              style="
                background: #e3f2fd;
                border-left: 4px solid #2196f3;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üîµ R√¥le</h4>
              <p>
                Tu es un expert DevOps sp√©cialis√© dans l'analyse de logs
                d'applications Java/Rails avec une expertise en debugging de
                transactions base de donn√©es.
              </p>
            </div>

            <div
              style="
                background: #e8f5e9;
                border-left: 4px solid #4caf50;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü¢ T√¢che</h4>
              <p>
                Analyse les logs de production Redmine ci-dessous et identifie
                la cause racine de l'erreur HTTP 500.
              </p>
            </div>

            <div
              style="
                background: #fff9c4;
                border-left: 4px solid #ffeb3b;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü° Contexte</h4>
              <p>
                Application : Redmine 5.x (Ruby on Rails + PostgreSQL)<br />
                Environnement : Production, charge normale (20 req/s)<br />
                Utilisateur affect√© : admin@company.com<br />
                Action tent√©e : Modification du nom d'un projet via PATCH
                /projects/test-modify.json
              </p>

              <h5 class="mt-md">Logs de Production (extrait 30 secondes) :</h5>
              <pre
                style="
                  background: #1e1e1e;
                  color: #d4d4d4;
                  padding: 1rem;
                  border-radius: 4px;
                  overflow-x: auto;
                  font-size: 0.85em;
                "
              ><code>[2025-11-02T14:35:12.500Z] INFO  [c0a1d4f2] - Request received: GET /issues/list.json?project_id=42
[2025-11-02T14:35:12.501Z] DEBUG [c0a1d4f2] - SQL: SELECT * FROM issues WHERE project_id = 42 LIMIT 25
[2025-11-02T14:35:12.550Z] INFO  [c0a1d4f2] - Response sent: 200 OK (50ms)

[2025-11-02T14:35:12.601Z] INFO  [a9f3b2d1] - Request received: PATCH /projects/test-modify.json
[2025-11-02T14:35:12.602Z] DEBUG [a9f3b2d1] - Authenticated user: admin@company.com (role: admin)
[2025-11-02T14:35:12.605Z] DEBUG [a9f3b2d1] - Payload: {"project": {"name": "New Project Name"}}
[2025-11-02T14:35:12.610Z] DEBUG [a9f3b2d1] - SQL: BEGIN TRANSACTION
[2025-11-02T14:35:12.620Z] DEBUG [a9f3b2d1] - SQL: UPDATE projects SET name='New Project Name' WHERE id=42
[2025-11-02T14:35:12.750Z] DEBUG [a9f3b2d1] - Update affected 1 row
[2025-11-02T14:35:12.755Z] DEBUG [a9f3b2d1] - Triggering before_save callback: update_activity_timestamp
[2025-11-02T14:35:12.760Z] WARN  [a9f3b2d1] - Callback update_activity_timestamp attempting to set 'updated_on' but column is NULL
[2025-11-02T14:35:12.765Z] DEBUG [a9f3b2d1] - SQL: UPDATE projects SET updated_on=NULL WHERE id=42
[2025-11-02T14:35:12.789Z] ERROR [a9f3b2d1] - ActiveRecord::StatementInvalid: PG::NotNullViolation: ERROR: null value in column "updated_on" violates not-null constraint
[2025-11-02T14:35:12.790Z] ERROR [a9f3b2d1] - DETAIL: Failing row contains (42, New Project Name, NULL, ...)
[2025-11-02T14:35:12.795Z] DEBUG [a9f3b2d1] - SQL: ROLLBACK TRANSACTION
[2025-11-02T14:35:12.800Z] WARN  [a9f3b2d1] - Transaction rolled back successfully
[2025-11-02T14:35:12.805Z] WARN  [a9f3b2d1] - Could not commit transaction. Retrying logic failed.
[2025-11-02T14:35:12.850Z] ERROR [a9f3b2d1] - HTTP 500 Internal Server Error sent to client
[2025-11-02T14:35:12.851Z] INFO  [a9f3b2d1] - Request completed: PATCH /projects/test-modify.json (250ms, status: 500)

[2025-11-02T14:35:13.100Z] INFO  [d4e5f6g7] - Request received: GET /projects/42.json
[2025-11-02T14:35:13.150Z] DEBUG [d4e5f6g7] - SQL: SELECT * FROM projects WHERE id = 42
[2025-11-02T14:35:13.155Z] DEBUG [d4e5f6g7] - Result: name='Old Project Name' (unchanged due to rollback)
[2025-11-02T14:35:13.200Z] INFO  [d4e5f6g7] - Response sent: 200 OK (100ms)

[2025-11-02T14:35:14.000Z] INFO  [e8f9g0h1] - Request received: POST /issues.json
[2025-11-02T14:35:14.050Z] INFO  [e8f9g0h1] - Response sent: 201 Created (50ms)</code></pre>
            </div>

            <div
              style="
                background: #ffebee;
                border-left: 4px solid #f44336;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üî¥ Contraintes</h4>
              <p>
                <strong
                  >Avant de donner la r√©ponse finale, d√©cris ton raisonnement
                  √©tape par √©tape en analysant :</strong
                >
              </p>
              <ul>
                <li>
                  Les requ√™tes concurrentes (identifie tous les IDs de
                  transaction)
                </li>
                <li>
                  Les timestamps et corr√©lations d'ID de transaction pour isoler
                  la s√©quence d'erreur
                </li>
                <li>
                  La s√©quence d'√©v√©nements menant √† l'erreur (de BEGIN √†
                  ROLLBACK)
                </li>
                <li>Les contraintes de base de donn√©es impliqu√©es</li>
                <li>Le callback probl√©matique et sa logique d√©faillante</li>
              </ul>
            </div>

            <div
              style="
                background: #f3e5f5;
                border-left: 4px solid #9c27b0;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü£ Format</h4>
              <p>Structure la r√©ponse ainsi :</p>
              <pre
                style="background: #f5f5f5; padding: 1rem; border-radius: 4px"
              ><code>## üîç Raisonnement √âtape par √âtape

### √âtape 1 : Identification des Transactions
[Liste des IDs + types de requ√™tes]

### √âtape 2 : Reconstitution Chronologique
[Timeline de la transaction a9f3b2d1]

### √âtape 3 : Analyse de l'Erreur
[Explication du callback d√©faillant]

### √âtape 4 : V√©rification du Rollback
[Confirmation que rien n'a √©t√© committ√©]

## üéØ Cause Racine
[R√©ponse finale concise]

## üõ†Ô∏è Solution Propos√©e
[Code fix]</code></pre>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ R√©sultat Attendu avec Chain-of-Thought</h4>
            <p>L'IA va d√©composer l'analyse :</p>
            <ol>
              <li>
                <strong>Identification :</strong> 4 transactions concurrentes
                (c0a1d4f2, a9f3b2d1, d4e5f6g7, e8f9g0h1)
              </li>
              <li>
                <strong>Chronologie :</strong> a9f3b2d1 est la transaction
                probl√©matique (PATCH project)
              </li>
              <li>
                <strong>S√©quence :</strong> BEGIN ‚Üí UPDATE projects ‚Üí Callback ‚Üí
                tentative SET updated_on=NULL ‚Üí violation contrainte
              </li>
              <li>
                <strong>Cause racine :</strong> Le callback
                <code>update_activity_timestamp</code> tente d'√©crire NULL dans
                une colonne NOT NULL
              </li>
              <li>
                <strong>Solution :</strong> Fixer le callback pour utiliser
                <code>Time.current</code> au lieu de NULL
              </li>
            </ol>
          </div>
        </div>

        <!-- 2.2.B : FEW-SHOT PROMPTING -->
        <div class="card mt-lg">
          <h3>B. Few-Shot Prompting : L'Exemple Ma√Ætre</h3>
          <p>
            Le Few-Shot Prompting consiste √†
            <strong>fournir 2-5 exemples concrets</strong> du format/style
            attendu avant de demander la g√©n√©ration. L'IA apprend le pattern par
            imitation.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Few-Shot ?</h4>
            <ul>
              <li>
                G√©n√©rer des donn√©es de test suivant un format complexe (IBAN,
                SIRET, NIR)
              </li>
              <li>
                Cr√©er des sc√©narios Gherkin conformes aux conventions de
                l'√©quipe
              </li>
              <li>Produire des fixtures JSON avec structure sp√©cifique</li>
              <li>
                √âcrire des tests suivant un template maison (pas AAA standard)
              </li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : G√©n√©ration de Donn√©es IBAN</h4>
          <button class="collapsible-btn" onclick="toggleCollapsible(this)">
            üìã Voir le Prompt Few-Shot + Exemples
          </button>
          <div class="collapsible-content">
            <div
              style="
                background: #e3f2fd;
                border-left: 4px solid #2196f3;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üîµ R√¥le</h4>
              <p>
                Tu es un expert en g√©n√©ration de donn√©es de test financi√®res
                conformes aux standards europ√©ens (SEPA, ISO 13616).
              </p>
            </div>

            <div
              style="
                background: #e8f5e9;
                border-left: 4px solid #4caf50;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü¢ T√¢che</h4>
              <p>
                G√©n√®re 10 exemples de donn√©es de test IBAN : 5 cas valides et 5
                cas invalides, en respectant EXACTEMENT le format JSON des
                exemples ci-dessous.
              </p>
            </div>

            <div
              style="
                background: #fff9c4;
                border-left: 4px solid #ffeb3b;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü° Contexte</h4>
              <p><strong>R√®gles IBAN par Pays :</strong></p>
              <ul>
                <li>
                  France (FR) : 27 caract√®res (FR + 2 chiffres contr√¥le + 23
                  chiffres)
                </li>
                <li>
                  Allemagne (DE) : 22 caract√®res (DE + 2 chiffres contr√¥le + 18
                  chiffres)
                </li>
                <li>
                  Belgique (BE) : 16 caract√®res (BE + 2 chiffres contr√¥le + 12
                  chiffres)
                </li>
              </ul>

              <p>
                <strong>Algorithme Checksum :</strong> Modulo 97 sur conversion
                alphanum√©rique
              </p>

              <h5 class="mt-md">Exemples de Format Souhait√© :</h5>
              <pre
                style="background: #f5f5f5; padding: 1rem; border-radius: 4px"
              ><code>{
  "iban": "FR7630006000011234567890189",
  "pays": "France",
  "valide": true,
  "raison": "IBAN fran√ßais valide avec checksum correct (76)"
}

{
  "iban": "FR7630006000011234567890188",
  "pays": "France",
  "valide": false,
  "raison": "Checksum incorrect (devrait √™tre 76, pas 88)"
}

{
  "iban": "DE891234567890123456",
  "pays": "Allemagne",
  "valide": false,
  "raison": "Longueur invalide pour l'Allemagne (20 caract√®res au lieu de 22)"
}</code></pre>
            </div>

            <div
              style="
                background: #ffebee;
                border-left: 4px solid #f44336;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üî¥ Contraintes</h4>
              <ul>
                <li>
                  Suivre <strong>EXACTEMENT</strong> le format JSON des exemples
                  (4 cl√©s : iban, pays, valide, raison)
                </li>
                <li>Inclure au moins 5 cas valides et 5 cas invalides</li>
                <li>
                  Varier les raisons d'invalidit√© : checksum incorrect, longueur
                  invalide, caract√®res non-alphanum√©riques, code pays inconnu
                </li>
                <li>
                  Pour les cas valides, calculer r√©ellement le bon checksum (ou
                  utiliser des IBANs tests officiels)
                </li>
              </ul>
            </div>

            <div
              style="
                background: #f3e5f5;
                border-left: 4px solid #9c27b0;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü£ Format</h4>
              <p>
                Array JSON de 10 objets, chacun avec les 4 cl√©s obligatoires :
                iban, pays, valide, raison
              </p>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ R√©sultat Attendu avec Few-Shot</h4>
            <p>
              L'IA va g√©n√©rer 10 cas en suivant scrupuleusement le pattern des 3
              exemples :
            </p>
            <ul>
              <li>M√™me structure JSON (4 cl√©s identiques)</li>
              <li>M√™me niveau de d√©tail dans <code>raison</code></li>
              <li>Respect des longueurs par pays</li>
              <li>Checksums r√©alistes (valides ou avec erreur explicite)</li>
            </ul>
            <p>
              <em
                >Sans Few-Shot, l'IA pourrait inventer des cl√©s diff√©rentes
                (<code>valid</code> au lieu de <code>valide</code>,
                <code>country</code> au lieu de <code>pays</code>) ou omettre
                <code>raison</code>.</em
              >
            </p>
          </div>
        </div>

        <!-- 2.2.C : PROMPT CHAINING -->
        <div class="card mt-lg">
          <h3>C. Prompt Chaining : D√©composer en Sous-Prompts</h3>
          <p>
            Le Prompt Chaining consiste √†
            <strong
              >d√©composer une t√¢che complexe en plusieurs prompts
              s√©quentiels</strong
            >, o√π la sortie de l'un devient l'entr√©e du suivant. Utile quand une
            seule g√©n√©ration produit du code incoh√©rent ou incomplet.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Prompt Chaining ?</h4>
            <ul>
              <li>
                G√©n√©rer un test E2E complet n√©cessitant setup + test + teardown
              </li>
              <li>
                Cr√©er une suite de tests o√π chaque test d√©pend des donn√©es du
                pr√©c√©dent
              </li>
              <li>
                Refactorer du code en plusieurs √©tapes (extraction ‚Üí renommage ‚Üí
                optimisation)
              </li>
              <li>G√©n√©rer documentation puis code √† partir de cette doc</li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : Test E2E avec Setup API</h4>
          <p>
            Objectif : G√©n√©rer un test complet pour "Modifier le nom d'un projet
            Redmine"
          </p>

          <div class="grid mt-md">
            <div class="card" style="background: #e3f2fd">
              <h4>√âtape 1Ô∏è‚É£ : Setup (Cr√©ation Projet)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>G√©n√®re une fonction TypeScript 
`createProjectAPI(name: string)` 
qui cr√©e un projet Redmine via 
POST /projects.json et retourne 
l'ID du projet cr√©√©.</code></pre>
              <p>
                <strong>Sortie :</strong> Fonction r√©utilisable avec gestion
                d'erreurs
              </p>
            </div>

            <div class="card" style="background: #e8f5e9">
              <h4>√âtape 2Ô∏è‚É£ : Test (Modification UI)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>G√©n√®re un test Cypress qui :
1. Utilise createProjectAPI() 
   pour cr√©er "Test Project"
2. Modifie le nom via UI
3. V√©rifie la modification via 
   GET /projects/:id.json

Contexte : Voici la fonction 
createProjectAPI() :
[coller la sortie de l'√©tape 1]</code></pre>
              <p>
                <strong>Sortie :</strong> Test E2E complet avec setup API +
                assertions
              </p>
            </div>

            <div class="card" style="background: #fff9c4">
              <h4>√âtape 3Ô∏è‚É£ : Teardown (Nettoyage)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>Ajoute un afterEach() au test 
qui supprime le projet cr√©√© via 
DELETE /projects/:id.json

Contexte : Voici le test actuel :
[coller la sortie de l'√©tape 2]</code></pre>
              <p>
                <strong>Sortie :</strong> Test complet avec cleanup automatique
              </p>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ Avantages du Chaining</h4>
            <ul>
              <li>
                <strong>Qualit√© :</strong> Chaque √©tape est focalis√©e, donc
                mieux r√©alis√©e
              </li>
              <li>
                <strong>R√©utilisabilit√© :</strong> La fonction
                <code>createProjectAPI()</code> peut servir √† d'autres tests
              </li>
              <li>
                <strong>Contr√¥le :</strong> Vous validez chaque √©tape avant de
                passer √† la suivante
              </li>
              <li>
                <strong>Debugging :</strong> Si erreur, facile d'identifier
                quelle √©tape a √©chou√©
              </li>
            </ul>
          </div>

          <div class="card warning mt-md">
            <h4>‚ö†Ô∏è Chaining vs Prompt Unique</h4>
            <p>Demander tout en un seul prompt produit souvent :</p>
            <ul>
              <li>‚ùå Code monolithique difficile √† maintenir</li>
              <li>‚ùå Setup/teardown oubli√©s ou incomplets</li>
              <li>‚ùå Gestion d'erreurs absente</li>
            </ul>
            <p>Le chaining force une architecture modulaire et compl√®te.</p>
          </div>
        </div>
      </section>

      <!-- MESSAGE CL√â FINAL -->
      <section class="card warning mt-xl">
        <h2>üéØ Le Message Cl√© de cette Section</h2>
        <p>
          Vous ma√Ætrisez maintenant les fondamentaux du Prompt Engineering pour
          la QA :
        </p>
        <ul>
          <li>
            ‚úÖ <strong>Les 5 composantes</strong> : R√¥le, T√¢che, Contexte,
            Contraintes, Format
          </li>
          <li>
            ‚úÖ <strong>Chain-of-Thought</strong> : "Explique ton raisonnement
            √©tape par √©tape" pour analyses complexes
          </li>
          <li>
            ‚úÖ <strong>Few-Shot</strong> : "Voici 3 exemples" pour garantir un
            format pr√©cis
          </li>
          <li>
            ‚úÖ <strong>Prompt Chaining</strong> : D√©composer en sous-prompts
            (Setup ‚Üí Test ‚Üí Teardown)
          </li>
        </ul>
        <p class="mt-md">
          <strong>Prochaine √©tape :</strong> Appliquer ces techniques √† des cas
          r√©els (g√©n√©ration tests, debugging, RAG)
        </p>
      </section>

      <!-- NAVIGATION -->
      <div class="navigation mt-xl">
        <a href="../section-1/index.html" class="btn-secondary">‚Üê Section 1</a>
        <a href="../section-3/index.html" class="btn-primary"
          >Section 3 : IA et Outillage QA ‚Üí</a
        >
      </div>
    </div>

    <footer>
      <p>Formation GitHub Copilot pour QA - Section 2/4</p>
      <p>üéì Masterclass Prompt Engineering</p>
    </footer>

    <script>
      function toggleCollapsible(button) {
        button.classList.toggle("active");
        const content = button.nextElementSibling;
        content.classList.toggle("active");
      }
    </script>
  </body>
</html>
