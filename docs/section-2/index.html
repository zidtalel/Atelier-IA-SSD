<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Section 2 : Ma√Ætriser le Prompt Engineering pour les Data Solutions</title>
    <link rel="stylesheet" href="../assets/style.css" />
  </head>
  <body>
    <nav>
      <div class="container">
        <div class="nav-title">Formation Sp√©cialiste de Solutions de Donn√©es & IA G√©n√©rative</div>
        <ul>
          <li><a href="../../index.html">Accueil</a></li>
          <li><a href="../section-1/index.html">Section 1</a></li>
          <li><a href="#" class="active">Section 2</a></li>
          <li><a href="../section-3/index.html">Section 3</a></li>
          <li><a href="../section-4/index.html">Section 4</a></li>
        </ul>
      </div>
    </nav>

    <header>
      <div class="container">
        <h1>üéØ Section 2 : Ma√Ætriser le Prompt Engineering pour le Sp√©cialiste de Donn√©es</h1>
        <p class="subtitle">Dur√©e : 90 minutes</p>
      </div>
    </header>

    <main>
      <div class="container">
        <!-- HERO SECTION -->
        <section class="hero">
          <h2>Pourquoi cette section ?</h2>
          <p>
            Ma√Ætriser l'art du prompt engineering pour transformer l'IA en 
            v√©ritable partenaire : obtenir des scripts SQL optimis√©s, des transformations de donn√©es pr√©cises, 
            des pipelines ETL robustes et adapt√©s √† vos architectures de donn√©es sp√©cifiques.
          </p>
        </section>

        <section class="objectives-section">
        <h2>üéØ Objectifs de cette Section</h2>
        <p class="intro-text">
          √Ä l'issue de cette section, vous serez capable de :
        </p>
        <div class="objectives-list">
          <div class="objective-item">
            <span class="objective-icon">üìê</span>
            <div class="objective-content">
              <strong>Anatomie d'un prompt efficace</strong> ‚Äî Ma√Ætriser les 5
              composantes essentielles (R√¥le, T√¢che, Contexte, Contraintes,
              Format) pour g√©n√©rer des requ√™tes SQL, scripts Python et transformations de donn√©es
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-icon">üß†</span>
            <div class="objective-content">
              <strong>Chain-of-Thought</strong> ‚Äî Faire expliciter le
              raisonnement √©tape par √©tape pour analyser la qualit√© des donn√©es et identifier les anomalies
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-icon">üìö</span>
            <div class="objective-content">
              <strong>Few-Shot Learning</strong> ‚Äî Guider l'IA avec des exemples
              concrets pour g√©n√©rer des transformations de donn√©es ou des donn√©es de test conformes √† votre sch√©ma
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-icon">üîó</span>
            <div class="objective-content">
              <strong>Prompt Chaining</strong> ‚Äî D√©composer un pipeline ETL complexe
              en sous-prompts s√©quentiels pour des transformations modulaires et testables
            </div>
          </div>
        </div>
      </section>
          </div>
        </div>
      </section>

      <!-- MODULE 2.1 : ANATOMIE D'UN PROMPT EFFICACE -->
      <section class="mt-xl">
        <h2>üìê Module 2.1 : Anatomie d'un Prompt Efficace (20 min)</h2>

        <div class="card highlight">
          <h3>Les 5 Composantes Essentielles</h3>
          <p>
            Un prompt de qualit√© professionnelle se compose de 5 √©l√©ments
            structurants :
          </p>
          <table>
            <thead>
              <tr>
                <th>Composante</th>
                <th>Description</th>
                <th>Exemple</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>üîµ <strong>R√¥le</strong></td>
                <td>D√©finit l'expertise et le contexte professionnel</td>
                <td>"Tu es un sp√©cialiste de solutions de donn√©es avec expertise en migration de donn√©es et sch√©mas relationnels"</td>
              </tr>
              <tr>
                <td>üü¢ <strong>T√¢che</strong></td>
                <td>L'action pr√©cise √† r√©aliser</td>
                <td>"G√©n√®re un script SQL pour transformer le fichier CSV en table normalis√©e"</td>
              </tr>
              <tr>
                <td>üü° <strong>Contexte</strong></td>
                <td>Informations techniques n√©cessaires</td>
                <td>"Base de donn√©es PostgreSQL, sch√©ma existant avec 15 tables, donn√©es client CSV avec 50 000 lignes"</td>
              </tr>
              <tr>
                <td>üî¥ <strong>Contraintes</strong></td>
                <td>R√®gles et limites √† respecter</td>
                <td>"Respecte les contraintes de cl√©s √©trang√®res, g√®re les doublons avec d√©dupplication par email"</td>
              </tr>
              <tr>
                <td>üü£ <strong>Format</strong></td>
                <td>Structure de sortie attendue</td>
                <td>"Script SQL avec commentaires, sections CREATE TABLE et INSERT, gestion des transactions"</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 2.1.A : R√îLE/PERSONA -->
        <div class="card success mt-lg">
          <h3>A. R√¥le/Persona : L'Impact du Contexte Professionnel</h3>
          <p>
            D√©finir le r√¥le transforme radicalement la qualit√© et la pertinence
            de la r√©ponse. Observons l'impact du <strong>R√¥le seul</strong> :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå Sans R√¥le</h4>
              <p>
                <em
                  >"G√©n√®re un script SQL pour charger les donn√©es client du fichier CSV clients.csv dans PostgreSQL"</em
                >
              </p>
              <p><strong>Probl√®mes :</strong></p>
              <ul>
                <li>Sch√©ma g√©n√©rique, pas optimis√© pour votre domaine</li>
                <li>Pas de gestion des doublons ou valeurs manquantes</li>
                <li>Pas de contraintes d'int√©grit√© (cl√©s √©trang√®res, unicit√©)</li>
                <li>Pas de normalisation ou de respect des conventions de nommage</li>
                <li>Performance non optimis√©e pour volum√©trie donn√©es r√©elles</li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ Avec R√¥le Uniquement</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt avec R√¥le
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>
                <p class="mt-md">
                  <em
                    >G√©n√®re un script SQL pour charger les donn√©es client du fichier CSV clients.csv dans PostgreSQL</em
                  >
                </p>
              </div>

              <p class="mt-md"><strong>Am√©lioration visible :</strong></p>
              <ul>
                <li>‚úÖ Sch√©ma normalis√© avec tables relationnelles appropri√©es</li>
                <li>‚úÖ Gestion int√©gr√©e des doublons et valeurs NULL</li>
                <li>‚úÖ Contraintes d'int√©grit√© r√©f√©rentielle automatiques</li>
                <li>‚úÖ Conventions de nommage coh√©rentes et professionnelles</li>
                <li>‚úÖ Indexes sur colonnes cl√©s pour performance</li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üí° Le√ßon Cl√©</h4>
            <p>
              Le r√¥le <strong>active le bon "mode d'expertise"</strong> de l'IA.
              Sans r√¥le, l'IA r√©pond en mode g√©n√©raliste. Avec un r√¥le de sp√©cialiste de donn√©es,
              elle applique automatiquement les standards d'architecture, de performance et de qualit√© de donn√©es.
            </p>
          </div>
        </div>

        <!-- 2.1.B : T√ÇCHE -->
        <div class="card mt-lg">
          <h3>B. T√¢che : La Clart√© de l'Intention</h3>
          <p>
            Une t√¢che bien formul√©e est
            <strong>sp√©cifique, mesurable et actionnable</strong>. Ajoutons
            maintenant une <strong>T√¢che claire</strong> au R√¥le √©tabli en A :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå R√¥le + T√¢che Vague</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Incomplet
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>
                <div
                  style="
                    background: #ffebee;
                    border-left: 4px solid #f44336;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che (Vague)</h4>
                  <p>
                    <em>"Cr√©e un script pour charger les donn√©es client dans la base de donn√©es"</em>
                  </p>
                </div>
              </div>
              <p class="mt-md"><strong>Probl√®mes :</strong></p>
              <ul>
                <li>Type de donn√©es non pr√©cis√© (fichier ? API ? quelle format ?)</li>
                <li>
                  Base de donn√©es non sp√©cifi√©e (PostgreSQL ? MongoDB ? AWS RDS ?)
                </li>
                <li>
                  P√©rim√®tre flou (tout charger d'un coup ? √©tapes progressives ?)
                </li>
                <li>
                  Pas de sp√©cification de d√©duplication, validation ou nettoyage
                </li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ R√¥le + T√¢che Claire (IDENTIQUE R√¥le + T√¢che Nouvelle)</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Am√©lior√©
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che (Pr√©cise)</h4>
                  <p>
                    <strong>G√©n√®re un script PostgreSQL complet</strong>
                    pour charger des donn√©es client d'un fichier CSV (clients.csv) dans une table PostgreSQL avec :
                  </p>
                  <ul>
                    <li>Cr√©ation de la table <code>customers</code> avec colonnes : id, email, first_name, last_name, phone, created_at</li>
                    <li>D√©duplication sur l'email (une seule entr√©e par adresse email)</li>
                    <li>Gestion des valeurs NULL pour phone</li>
                    <li>Indexes sur id, email et created_at</li>
                    <li>Contrainte d'unicit√© sur email</li>
                  </ul>
                </div>
              </div>
              <p class="mt-md"><strong>Am√©lioration :</strong></p>
              <ul>
                <li>‚úÖ Livrable d√©fini (script PostgreSQL complet)</li>
                <li>‚úÖ Source de donn√©es sp√©cifi√©e (CSV)</li>
                <li>‚úÖ Colonnes explicites et typ√©es</li>
                <li>‚úÖ R√©gles de qualit√© donn√©es (d√©duplication, gestion NULL)</li>
                <li>‚úÖ Performance optimis√©e (indexes sur colonnes cl√©s)</li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üí° Formule Gagnante pour une T√¢che Claire</h4>
            <p>
              <strong
                >Verbe d'action + Livrable pr√©cis + Crit√®res de succ√®s + Structure de donn√©es</strong
              >
            </p>
            <ul>
              <li>
                <strong>Verbe :</strong> G√©n√®re, Cr√©e, Transforme, Migre, Nettoie, Normalise
              </li>
              <li>
                <strong>Livrable :</strong> Type exact (script SQL, DataFrame Python, script ETL)
              </li>
              <li>
                <strong>Crit√®res :</strong> Colonnes, transformations, r√®gles de d√©duplication
              </li>
              <li>
                <strong>Performance :</strong> Handling de volum√©trie, optimisation
              </li>
            </ul>
            <p class="mt-md"><em>Exemples de t√¢ches bien formul√©es :</em></p>
            <ul class="success-list">
              <li>
                "G√©n√®re un script Python Pandas pour convertir 50 fichiers CSV en une unique table normalis√©e"
              </li>
              <li>
                "Cr√©e une requ√™te SQL pour fusionner 3 sources de donn√©es clients avec d√©dupplication par ID"
              </li>
              <li>
                "Transforme ce JSON imbriqu√© en tables PostgreSQL respectant la 3√®me forme normale"
              </li>
            </ul>
          </div>
        </div>

        <!-- 2.1.C : CONTEXTE -->
        <div class="card mt-lg">
          <h3>C. Contexte : Le Carburant de la Pr√©cision</h3>
          <p>
            Le contexte transforme une r√©ponse g√©n√©rique en solution sur-mesure.
            Ajoutons le <strong>Contexte technique</strong> au R√¥le + T√¢che :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå R√¥le + T√¢che Sans Contexte</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Sans Contexte
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    <strong>G√©n√®re un script PostgreSQL complet</strong>
                    pour charger des donn√©es client d'un fichier CSV (clients.csv) dans une table PostgreSQL avec :
                  </p>
                  <ul>
                    <li>Cr√©ation de la table <code>customers</code> avec colonnes : id, email, first_name, last_name, phone, created_at</li>
                    <li>D√©duplication sur l'email (une seule entr√©e par adresse email)</li>
                    <li>Gestion des valeurs NULL pour phone</li>
                    <li>Indexes sur id, email et created_at</li>
                    <li>Contrainte d'unicit√© sur email</li>
                  </ul>
                </div>
              </div>
              <p class="mt-md"><strong>Probl√®me :</strong></p>
              <ul>
                <li>‚ö†Ô∏è L'IA va deviner la structure du CSV</li>
                <li>
                  ‚ö†Ô∏è Types de donn√©es g√©n√©riques (TEXT au lieu de BIGINT pour ID)
                </li>
                <li>
                  ‚ö†Ô∏è Pas d'optimisation pour votre sch√©ma existant
                </li>
                <li>
                  ‚ö†Ô∏è Nettoyage de donn√©es incomplet
                </li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ R√¥le + T√¢che + Contexte</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Avec Contexte
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    G√©n√®re un script PostgreSQL complet pour charger des donn√©es client d'un fichier CSV (clients.csv) dans une table PostgreSQL avec :
                  </p>
                  <ul>
                    <li>Cr√©ation de la table <code>customers</code> avec colonnes : id, email, first_name, last_name, phone, created_at</li>
                    <li>D√©duplication sur l'email (une seule entr√©e par adresse email)</li>
                    <li>Gestion des valeurs NULL pour phone</li>
                    <li>Indexes sur id, email et created_at</li>
                    <li>Contrainte d'unicit√© sur email</li>
                  </ul>
                </div>
                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Environnement :</strong> PostgreSQL 15 (base de donn√©es "production_db")
                  </p>
                  <p><strong>Stack :</strong> Python 3.11 + psycopg2</p>
                  <p>
                    <strong>Voici la structure du fichier CSV clients.csv :</strong>
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                      font-size: 0.85em;
                    "
                  ><code style="color: #d4d4d4;">id,email,first_name,last_name,phone,registration_date
1,alice@company.com,Alice,Martin,,2024-01-15
2,bob@company.com,Bob,Dupont,+33612345678,2024-02-03
3,alice@company.com,Alice,Martin,,2024-03-20
4,charlie@test.fr,Charlie,,+33698765432,2024-01-10</code></pre>
                  <p class="mt-md"><strong>Notes :</strong></p>
                  <ul>
                    <li>50 000 lignes de donn√©es (volum√©trie production)</li>
                    <li>Doublons potentiels sur email (lignes 1 et 3)</li>
                    <li>Champs last_name et phone peuvent √™tre vides</li>
                    <li>Dates au format ISO (YYYY-MM-DD)</li>
                  </ul>
                </div>
              </div>
              <p class="mt-md"><strong>Am√©lioration :</strong></p>
              <ul>
                <li>
                  ‚úÖ Types de donn√©es <strong>exacts</strong> :
                  <code>BIGINT</code> pour ID, <code>VARCHAR(255)</code> pour email
                </li>
                <li>
                  ‚úÖ Structure adapt√©e √† vos donn√©es r√©elles (d√©tection colonnes manquantes)
                </li>
                <li>
                  ‚úÖ D√©duplication int√©gr√©e (vous avez 4 entr√©es mais seulement 3 clients uniques)
                </li>
                <li>
                  ‚úÖ Optimisation pour volum√©trie 50K lignes (batch INSERT)
                </li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üéØ Types de Contexte √† Fournir</h4>
            <div class="grid mt-md">
              <div class="card">
                <h4>üèóÔ∏è Architecture</h4>
                <ul>
                  <li>Base de donn√©es : PostgreSQL, MySQL</li>
                  <li>Langage : SQL, Python</li>
                  <li>Pattern : ETL, normalisation</li>
                </ul>
              </div>
              <div class="card">
                <h4>üåê Donn√©es</h4>
                <ul>
                  <li>Structure CSV/JSON r√©elle</li>
                  <li>Sch√©ma de la table cible</li>
                  <li>R√®gles m√©tier de d√©duplication</li>
                </ul>
              </div>
              <div class="card">
                <h4>üîß Configuration</h4>
                <ul>
                  <li>Versions base de donn√©es</li>
                  <li>Charsets et encodages</li>
                  <li>Conventions de nommage des colonnes</li>
                </ul>
              </div>
            </div>
            <p class="mt-md">
              <strong>R√®gle d'or :</strong> Ne jamais pr√©sumer que l'IA conna√Æt
              votre sch√©ma et vos donn√©es. Fournissez la structure CSV/JSON et le sch√©ma
              PostgreSQL r√©els pour une transformation pr√©cise garantie.
            </p>
          </div>
        </div>

        <!-- 2.1.D : CONTRAINTES -->
        <div class="card mt-lg">
          <h3>D. Contraintes : Le Garde-Fou de la Qualit√©</h3>
          <p>
            Les contraintes transforment du code fonctionnel en code
            <strong>maintenable, s√©curis√© et conforme</strong>. Ajoutons les
            <strong>Contraintes</strong>
            qui guident l'IA vers les meilleures pratiques de votre √©quipe :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå R√¥le + T√¢che + Contexte Sans Contraintes (IDENTIQUE 2.1.C)</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Sans Contraintes
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    <strong>G√©n√®re un script PostgreSQL complet</strong>
                    pour charger des donn√©es client d'un fichier CSV (clients.csv) dans une table PostgreSQL avec :
                  </p>
                  <ul>
                    <li>Cr√©ation de la table <code>customers</code> avec colonnes : id, email, first_name, last_name, phone, created_at</li>
                    <li>D√©duplication sur l'email (une seule entr√©e par adresse email)</li>
                    <li>Gestion des valeurs NULL pour phone</li>
                    <li>Indexes sur id, email et created_at</li>
                    <li>Contrainte d'unicit√© sur email</li>
                  </ul>
                </div>
                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Environnement :</strong> PostgreSQL 15 (base de donn√©es "production_db")
                  </p>
                  <p><strong>Stack :</strong> Python 3.11 + psycopg2</p>
                  <p>
                    <strong>Voici la structure du fichier CSV clients.csv :</strong>
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                      font-size: 0.85em;
                    "
                  ><code style="color: #d4d4d4;">id,email,first_name,last_name,phone,registration_date
1,alice@company.com,Alice,Martin,,2024-01-15
2,bob@company.com,Bob,Dupont,+33612345678,2024-02-03
3,alice@company.com,Alice,Martin,,2024-03-20
4,charlie@test.fr,Charlie,,+33698765432,2024-01-10</code></pre>
                  <p class="mt-md"><strong>Notes :</strong></p>
                  <ul>
                    <li>50 000 lignes de donn√©es (volum√©trie production)</li>
                    <li>Doublons potentiels sur email (lignes 1 et 3)</li>
                    <li>Champs last_name et phone peuvent √™tre vides</li>
                    <li>Dates au format ISO (YYYY-MM-DD)</li>
                  </ul>
                </div>
              </div>
              <p class="mt-md"><strong>Probl√®me :</strong></p>
              <ul>
                <li>
                  ‚ö†Ô∏è L'IA g√©n√®re un script sans d√©duplication
                </li>
                <li>‚ö†Ô∏è Pas de gestion des valeurs NULL</li>
                <li>‚ö†Ô∏è Pas de contraintes d'int√©grit√© ni indexes</li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ R√¥le + T√¢che + Contexte + Contraintes (ACCUMULATION)</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Avec Contraintes
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    <strong>G√©n√®re un script PostgreSQL complet</strong>
                    pour charger des donn√©es client d'un fichier CSV (clients.csv) dans une table PostgreSQL avec :
                  </p>
                  <ul>
                    <li>Cr√©ation de la table <code>customers</code> avec colonnes : id, email, first_name, last_name, phone, created_at</li>
                    <li>D√©duplication sur l'email (une seule entr√©e par adresse email)</li>
                    <li>Gestion des valeurs NULL pour phone</li>
                    <li>Indexes sur id, email et created_at</li>
                    <li>Contrainte d'unicit√© sur email</li>
                  </ul>
                </div>
                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Environnement :</strong> PostgreSQL 15 (base de donn√©es "production_db")
                  </p>
                  <p><strong>Stack :</strong> Python 3.11 + psycopg2</p>
                  <p>
                    <strong>Voici la structure du fichier CSV clients.csv :</strong>
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                      font-size: 0.85em;
                    "
                  ><code style="color: #d4d4d4;">id,email,first_name,last_name,phone,registration_date
1,alice@company.com,Alice,Martin,,2024-01-15
2,bob@company.com,Bob,Dupont,+33612345678,2024-02-03
3,alice@company.com,Alice,Martin,,2024-03-20
4,charlie@test.fr,Charlie,,+33698765432,2024-01-10</code></pre>
                  <p class="mt-md"><strong>Notes :</strong></p>
                  <ul>
                    <li>50 000 lignes de donn√©es (volum√©trie production)</li>
                    <li>Doublons potentiels sur email (lignes 1 et 3)</li>
                    <li>Champs last_name et phone peuvent √™tre vides</li>
                    <li>Dates au format ISO (YYYY-MM-DD)</li>
                  </ul>
                </div>                <div
                  style="
                    background: #ffebee;
                    border-left: 4px solid #f44336;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üî¥ Contraintes</h4>
                  <ul>
                    <li>
                      <strong>D√©duplication :</strong> Une seule entr√©e par email
                      (garder la premi√®re occurrence, ignorer les doublons)
                    </li>
                    <li>
                      <strong>NULL Handling :</strong> Phone peut √™tre NULL, mais
                      first_name et last_name doivent avoir une valeur par d√©faut (ex: 'Unknown')
                    </li>
                    <li>
                      <strong>Data Types :</strong> id (INTEGER PRIMARY KEY), email (VARCHAR 255 UNIQUE),
                      first_name (VARCHAR 100), last_name (VARCHAR 100), phone (VARCHAR 20 NULL),
                      registration_date (DATE)
                    </li>
                    <li>
                      <strong>Int√©grit√© :</strong> Ajouter indexes sur email, registration_date et contrainte UNIQUE sur email
                    </li>
                  </ul>
                </div>
              </div>
              <p class="mt-md"><strong>Am√©lioration :</strong></p>
              <ul>
                <li>
                  ‚úÖ D√©duplication garantie avec DISTINCT ON (email)
                </li>
                <li>‚úÖ Architecture conforme aux standards de normalisation</li>
                <li>
                  ‚úÖ NULL handling et types de donn√©es g√©r√©s automatiquement
                </li>
                <li>‚úÖ Int√©grit√© r√©f√©rentielle proactive avec indexes</li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üìã Cat√©gories de Contraintes Efficaces</h4>
            <div class="grid mt-md">
              <div class="card">
                <h4>üéØ Techniques</h4>
                <ul>
                  <li>S√©lecteurs autoris√©s/interdits</li>
                  <li>Versions compatibles</li>
                  <li>Performance (timeout max)</li>
                </ul>
              </div>
              <div class="card">
                <h4>üîí S√©curit√©</h4>
                <ul>
                  <li>Pas de donn√©es PII en dur</li>
                  <li>Credentials via env variables</li>
                  <li>Conformit√© RGPD/PCI DSS</li>
                </ul>
              </div>
              <div class="card">
                <h4>üèóÔ∏è Architecture</h4>
                <ul>
                  <li>Pattern √† respecter (POM)</li>
                  <li>Structure de dossiers</li>
                  <li>Conventions de nommage</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- 2.1.E : FORMAT -->
        <div class="card mt-lg">
          <h3>E. Format : La Structure de Sortie</h3>
          <p>
            Sp√©cifier le format de sortie garantit un r√©sultat
            <strong>directement exploitable</strong> sans post-traitement
            manuel. Voyons comment ajouter chaque composante progressivement
            jusqu'√† obtenir les <strong>5 composantes r√©unies</strong> avec un
            exemple de transformation SQL pour normaliser les donn√©es clients.
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå R√¥le + T√¢che + Contexte + Contraintes Sans Format</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Sans Format
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>

                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    <strong>G√©n√®re un script PostgreSQL complet</strong>
                    pour charger des donn√©es client d'un fichier CSV (clients.csv) dans une table PostgreSQL avec :
                  </p>
                  <ul>
                    <li>Cr√©ation de la table <code>customers</code> avec colonnes : id, email, first_name, last_name, phone, created_at</li>
                    <li>D√©duplication sur l'email (une seule entr√©e par adresse email)</li>
                    <li>Gestion des valeurs NULL pour phone</li>
                    <li>Indexes sur id, email et created_at</li>
                    <li>Contrainte d'unicit√© sur email</li>
                  </ul>
                </div>

                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Environnement :</strong> PostgreSQL 15 (base de donn√©es "production_db")
                  </p>
                  <p><strong>Stack :</strong> Python 3.11 + psycopg2</p>
                  <p>
                    <strong>Voici la structure du fichier CSV clients.csv :</strong>
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                      font-size: 0.85em;
                    "
                  ><code style="color: #d4d4d4;">id,email,first_name,last_name,phone,registration_date
1,alice@company.com,Alice,Martin,,2024-01-15
2,bob@company.com,Bob,Dupont,+33612345678,2024-02-03
3,alice@company.com,Alice,Martin,,2024-03-20
4,charlie@test.fr,Charlie,,+33698765432,2024-01-10</code></pre>
                  <p class="mt-md"><strong>Notes :</strong></p>
                  <ul>
                    <li>50 000 lignes de donn√©es (volum√©trie production)</li>
                    <li>Doublons potentiels sur email (lignes 1 et 3)</li>
                    <li>Champs last_name et phone peuvent √™tre vides</li>
                    <li>Dates au format ISO (YYYY-MM-DD)</li>
                  </ul>
                </div>

                <div
                  style="
                    background: #ffebee;
                    border-left: 4px solid #f44336;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üî¥ Contraintes</h4>
                  <ul>
                    <li>
                      <strong>D√©duplication :</strong> Une seule entr√©e par email
                      (garder la premi√®re occurrence, ignorer les doublons)
                    </li>
                    <li>
                      <strong>NULL Handling :</strong> Phone peut √™tre NULL, mais
                      first_name et last_name doivent avoir une valeur par d√©faut (ex: 'Unknown')
                    </li>
                    <li>
                      <strong>Data Types :</strong> id (INTEGER PRIMARY KEY), email (VARCHAR 255 UNIQUE),
                      first_name (VARCHAR 100), last_name (VARCHAR 100), phone (VARCHAR 20 NULL),
                      registration_date (DATE)
                    </li>
                    <li>
                      <strong>Int√©grit√© :</strong> Ajouter indexes sur email, registration_date et contrainte UNIQUE sur email
                    </li>
                  </ul>
                </div>
              </div>
              <p class="mt-md"><strong>Probl√®me :</strong></p>
              <ul>
                <li>‚ö†Ô∏è Structure SQL vague, peut g√©n√©rer du code incoh√©rent</li>
                <li>‚ö†Ô∏è Pas de sections clairement identifi√©es (CREATE vs INSERT vs VALIDATE)</li>
                <li>‚ö†Ô∏è Tags et commentaires inconsistants</li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ R√¥le + T√¢che + Contexte + Contraintes + Format (ACCUMULATION)</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Complet avec les 5 Composantes
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un sp√©cialiste de solutions de donn√©es avec 10 ans d'exp√©rience en ETL et normalisation de donn√©es.
                    Tu ma√Ætrises PostgreSQL, Python, et les bonnes pratiques d'architecture de donn√©es. 
                    Tu appliques toujours les principes de normalisation, d√©dupplication et optimisation des performances.
                  </p>
                </div>

                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    <strong>G√©n√®re un script PostgreSQL complet</strong>
                    pour charger des donn√©es client d'un fichier CSV (clients.csv) dans une table PostgreSQL avec :
                  </p>
                  <ul>
                    <li>Cr√©ation de la table <code>customers</code> avec colonnes : id, email, first_name, last_name, phone, created_at</li>
                    <li>D√©duplication sur l'email (une seule entr√©e par adresse email)</li>
                    <li>Gestion des valeurs NULL pour phone</li>
                    <li>Indexes sur id, email et created_at</li>
                    <li>Contrainte d'unicit√© sur email</li>
                  </ul>
                </div>

                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Environnement :</strong> PostgreSQL 15 (base de donn√©es "production_db")
                  </p>
                  <p><strong>Stack :</strong> Python 3.11 + psycopg2</p>
                  <p>
                    <strong>Voici la structure du fichier CSV clients.csv :</strong>
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                      font-size: 0.85em;
                    "
                  ><code style="color: #d4d4d4;">id,email,first_name,last_name,phone,registration_date
1,alice@company.com,Alice,Martin,,2024-01-15
2,bob@company.com,Bob,Dupont,+33612345678,2024-02-03
3,alice@company.com,Alice,Martin,,2024-03-20
4,charlie@test.fr,Charlie,,+33698765432,2024-01-10</code></pre>
                  <p class="mt-md"><strong>Notes :</strong></p>
                  <ul>
                    <li>50 000 lignes de donn√©es (volum√©trie production)</li>
                    <li>Doublons potentiels sur email (lignes 1 et 3)</li>
                    <li>Champs last_name et phone peuvent √™tre vides</li>
                    <li>Dates au format ISO (YYYY-MM-DD)</li>
                  </ul>
                </div>

                <div
                  style="
                    background: #ffebee;
                    border-left: 4px solid #f44336;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üî¥ Contraintes</h4>
                  <ul>
                    <li>
                      <strong>D√©duplication :</strong> Une seule entr√©e par email
                      (garder la premi√®re occurrence, ignorer les doublons)
                    </li>
                    <li>
                      <strong>NULL Handling :</strong> Phone peut √™tre NULL, mais
                      first_name et last_name doivent avoir une valeur par d√©faut (ex: 'Unknown')
                    </li>
                    <li>
                      <strong>Data Types :</strong> id (INTEGER PRIMARY KEY), email (VARCHAR 255 UNIQUE),
                      first_name (VARCHAR 100), last_name (VARCHAR 100), phone (VARCHAR 20 NULL),
                      registration_date (DATE)
                    </li>
                    <li>
                      <strong>Int√©grit√© :</strong> Ajouter indexes sur email, registration_date et contrainte UNIQUE sur email
                    </li>
                  </ul>
                </div>

                <div
                  style="
                    background: #f3e5f5;
                    border-left: 4px solid #9c27b0;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü£ Format</h4>
                  <p>Respecte EXACTEMENT cette structure SQL :</p>
                  <pre
                    style="
                      background: #f5f5f5;
                      padding: 1rem;
                      border-radius: 4px;
                      font-size: 0.85em;
                    "
                  ><code>-- DATA-2456 @CREATE_STRUCTURE
BEGIN TRANSACTION;

CREATE TABLE IF NOT EXISTS customers (
  id INTEGER PRIMARY KEY,
  email VARCHAR(255) NOT NULL UNIQUE,
  first_name VARCHAR(100) NOT NULL DEFAULT 'Unknown',
  last_name VARCHAR(100) NOT NULL DEFAULT 'Unknown',
  phone VARCHAR(20),
  registration_date DATE NOT NULL
);

CREATE INDEX idx_customers_email ON customers(email);
CREATE INDEX idx_customers_registration_date ON customers(registration_date);

-- DATA-2456 @LOAD_DATA
INSERT INTO customers (id, email, first_name, last_name, phone, registration_date)
SELECT DISTINCT ON (email)
  id, email,
  COALESCE(NULLIF(first_name, ''), 'Unknown'),
  COALESCE(NULLIF(last_name, ''), 'Unknown'),
  NULLIF(phone, '')::VARCHAR,
  registration_date::DATE
FROM temp_csv_import
WHERE email IS NOT NULL AND email ~ '@'
ORDER BY email, registration_date ASC;

-- DATA-2456 @VALIDATE
SELECT COUNT(*) as total_rows, COUNT(DISTINCT email) as unique_emails FROM customers;

COMMIT;</code></pre>
                </div>
              </div>
              <p class="mt-md"><strong>Am√©lioration :</strong></p>
              <ul>
                <li>‚úÖ Structure SQL explicite (3 phases : CREATE / LOAD / VALIDATE)</li>
                <li>‚úÖ Tags DATA-2456 pour tra√ßabilit√©</li>
                <li>‚úÖ D√©duplication DISTINCT ON exacte (pas ambigu√´)</li>
                <li>‚úÖ Transaction ACID compl√®te</li>
                <li>‚úÖ Pas d'ambigu√Øt√© : code directement ex√©cutable</li>
              </ul>
            </div>
          </div>

            <div class="card success mt-md">
              <h4>‚úÖ R√©sultat Attendu avec les 5 Composantes</h4>
              <p>
                L'IA va g√©n√©rer des scripts SQL parfaitement structur√©s :
              </p>
              <ul>
                <li>
                  ‚úÖ <strong>R√¥le :</strong> Vocabulaire de donn√©es (normalisation, d√©duplication),
                  focus qualit√© de donn√©es
                </li>
                <li>
                  ‚úÖ <strong>T√¢che :</strong> Scripts complets couvrant cr√©ation de table,
                  chargement avec d√©duplication et validation
                </li>
                <li>
                  ‚úÖ <strong>Contexte :</strong> Donn√©es r√©alistes avec volum√©tries exactes (50K, 2500 doublons)
                </li>
                <li>
                  ‚úÖ <strong>Contraintes :</strong> Tags DATA, DISTINCT ON explicite, transaction ACID
                </li>
                <li>
                  ‚úÖ <strong>Format :</strong> Structure SQL identique (3 phases, indentation coh√©rente)
                </li>
              </ul>
              <p class="mt-md">
                <em
                  >Ce script est pr√™t √† √™tre ex√©cut√© dans PostgreSQL pour charger
                  les donn√©es clients de mani√®re normalis√©e et testable.</em
                >
              </p>
            </div>

          <div class="card info mt-md">
            <h4>üé® Autres Formats Courants en Data Solutions</h4>
            <div class="grid">
              <div class="card">
                <h4>üß™ Python (Pandas)</h4>
                <p>Structure : <code>DataFrame.apply/map/groupby</code></p>
                <p>Pattern : Extract-Transform-Load</p>
              </div>
              <div class="card">
                <h4>üìä JSON (Sch√©ma)</h4>
                <p>Colonnes et types de donn√©es explicites</p>
                <p>R√®gles de validation de sch√©ma</p>
              </div>
              <div class="card">
                <h4>üìã SQL (Migration)</h4>
                <p>Sections : CREATE / INSERT / VALIDATE</p>
                <p>Transactions ACID incluses</p>
              </div>
            </div>
          </div>

          <div class="card warning mt-md">
            <h4>‚ö†Ô∏è Pr√©cision du Format = Qualit√© Garantie</h4>
            <ul>
              <li>
                ‚ùå "Format SQL" ‚Üí L'IA pourrait oublier DISTINCT ON ou les contraintes
              </li>
              <li>
                ‚úÖ "Format SQL avec CREATE TABLE + INSERT DISTINCT ON (email) + VALIDATE SELECT COUNT" ‚Üí Structure exacte garantie
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- MODULE 2.2 : LES 3 TECHNIQUES AVANC√âES -->
      <section class="mt-xl">
        <h2>üöÄ Module 2.2 : Les 3 Techniques Avanc√©es (30 min)</h2>

        <!-- 2.2.A : CHAIN-OF-THOUGHT -->
        <div class="card mt-lg">
          <h3>A. Chain-of-Thought : La Pens√©e Logique Explicite</h3>
          <p>
            Le Chain-of-Thought (CoT) demande √† l'IA d'<strong
              >expliciter son raisonnement √©tape par √©tape</strong
            >
            avant de fournir la r√©ponse finale. Crucial pour les probl√®mes
            complexes n√©cessitant une analyse multi-√©tapes.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Chain-of-Thought ?</h4>
            <ul>
              <li>Analyser la qualit√© de donn√©es avec anomalies multiples</li>
              <li>D√©boguer des transformations complexes avec r√©sultats inattendus</li>
              <li>
                Identifier des causes racines dans des pipelines ETL
                multi-√©tapes
              </li>
              <li>
                √âvaluer les patterns de d√©duplication face aux donn√©es r√©elles
              </li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : Analyse de Qualit√© de Donn√©es</h4>
          <button class="collapsible-btn" onclick="toggleCollapsible(this)">
            üìã Voir le Prompt Chain-of-Thought + Donn√©es
          </button>
          <div class="collapsible-content">
            <div style="text-align: right; margin-bottom: 0.5rem">
              <button
                onclick="copyPrompt(this)"
                style="
                  background: #2196f3;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 0.9em;
                "
              >
                üìã Copier le prompt
              </button>
            </div>
            <div
              style="
                background: #e3f2fd;
                border-left: 4px solid #2196f3;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üîµ R√¥le</h4>
              <p>
                Tu es un expert de la donn√©e sp√©cialis√© dans l'analyse d'anomalies
                de donn√©es et les strat√©gies de d√©duplication multi-sources avec expertise en
                diagnostique de transformations ETL complexes.
              </p>
            </div>

            <div
              style="
                background: #e8f5e9;
                border-left: 4px solid #4caf50;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü¢ T√¢che</h4>
              <p>
                Analyse le fichier CSV clients ci-dessous et identifie
                la cause racine des anomalies de donn√©es et les meilleures strat√©gies de nettoyage.
              </p>
            </div>

            <div
              style="
                background: #fff9c4;
                border-left: 4px solid #ffeb3b;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü° Contexte</h4>
              <p>
                Source de donn√©es : Fichier CSV clients.csv<br />
                Volum√©trie : 50K lignes<br />
                P√©riode d'import : 2025-01-10 √† 2025-02-20<br />
                Action : Charger et nettoyer les donn√©es clients
              </p>

              <h5 class="mt-md">Extrait CSV avec anomalies (premi√®res 20 lignes) :</h5>
              <pre
                style="
                  background: #1e1e1e;
                  padding: 1rem;
                  border-radius: 4px;
                  overflow-x: auto;
                  font-size: 0.85em;
                "
              ><code style="color: #d4d4d4;">id,email,first_name,last_name,phone,registration_date
1,alice@company.com,Alice,Dupont,+33612345678,2025-01-10
2,bob@company.com,Bob,Martin,,2025-01-12
3,alice@company.com,Alice,Dupont,+33612345678,2025-01-15
4,charlie@company.com,Charlie,Bernard,+33698765432,2025-01-20
5,invalid-email,David,Lopez,,2025-02-01
6,eve@company.com,Eve,Leclerc,+33756123456,2025-02-05
7,,Frank,Moreau,+33789123456,2025-02-10
8,george@company.com,George,Garcia,,2025-02-12
9,george@company.com,George,Garcia,+33654123789,2025-02-15
10,henry@company.com,,Harris,,2025-02-18
11,alice@company.com,ALICE,DUPONT,+33600000000,2025-01-08
12,irene@company.com,Irene,Dubois,+33712345678,2025-02-20
13,,Jack,Lemaire,,2025-02-22
14,iris@company.com,Iris,Renard,+33798123456,2025-02-25
15,iris@company.com,Iris,Renard,,2025-02-28
16,kevin@company.com,,,,2025-03-01
17,kevin@company.com,Kevin,Laurent,+33701234567,2025-03-05
18,laura@company.com,Laura,Martin,NULL,2025-03-08
19,michael@company.com,Michael,Thomas,,2025-03-10
20,michael@company.com,Michael,Thompson,+33789456123,2025-03-12
...(50K lignes total avec ~2500 doublons d√©tect√©s)</code></pre>
            </div>

            <div
              style="
                background: #ffebee;
                border-left: 4px solid #f44336;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üî¥ Contraintes</h4>
              <p>
                <strong
                  >Avant de donner la r√©ponse finale, d√©cris ton raisonnement
                  √©tape par √©tape en analysant :</strong
                >
              </p>
              <ul>
                <li>
                  Les doublons (emails identiques, variations de casse, anomalies de d√©duplication)
                </li>
                <li>
                  Les valeurs manquantes (NULL vs cha√Æne vide vs 'Unknown', distribution par colonne)
                </li>
                <li>
                  La qualit√© des emails (format invalide, absence de @)
                </li>
                <li>Les contraintes de typage (phone, registration_date)</li>
                <li>L'impact total sur le nombre de lignes √† charger apr√®s nettoyage</li>
              </ul>
            </div>

            <div
              style="
                background: #f3e5f5;
                border-left: 4px solid #9c27b0;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü£ Format</h4>
              <p>Structure la r√©ponse ainsi :</p>
              <pre
                style="background: #f5f5f5; padding: 1rem; border-radius: 4px"
              ><code>## üîç Raisonnement √âtape par √âtape

### √âtape 1 : Analyse des Doublons
[Patterns de doublons identifi√©s, ex: alice@company.com]

### √âtape 2 : √âtude des Valeurs Manquantes
[Distribution des NULLs, cha√Ænes vides, par colonne]

### √âtape 3 : Validation des Formats
[Emails invalides, dates invalides d√©tect√©es]

### √âtape 4 : Calcul de l'Impact
[Estimation doublons + invalides = r√©duction 50K ‚Üí ?K]

## üéØ Recommandations de D√©duplication
[Strat√©gie : DISTINCT ON (email), ordre par date]

## üõ†Ô∏è Script SQL Optimis√©
[Requ√™te de nettoyage]</code></pre>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ R√©sultat Attendu avec Chain-of-Thought</h4>
            <p>L'IA va d√©composer l'analyse :</p>
            <ol>
              <li>
                <strong>Doublons :</strong> ~2500 lignes avec email identique
                (ex: alice@company.com en ID 1, 3, 11) ‚Üí garder premi√®re occurrence
              </li>
              <li>
                <strong>Valeurs manquantes :</strong> ~3000 phones vides, ~500 first/last_name absents
                ‚Üí normaliser avec defaults
              </li>
              <li>
                <strong>Format email :</strong> Certains sans '@' (invalid-email) ou vides
                ‚Üí filtrer ou rejeter
              </li>
              <li>
                <strong>Impact :</strong> 50K entr√©es CSV ‚Üí ~47.5K apr√®s d√©duplication
              </li>
              <li>
                <strong>Solution :</strong> Utiliser DISTINCT ON (email) avec ORDER BY
                registration_date ASC pour garder la premi√®re occurrence
              </li>
            </ol>
          </div>
        </div>

        <!-- 2.2.B : FEW-SHOT PROMPTING -->
        <div class="card mt-lg">
          <h3>B. Few-Shot Prompting : Apprendre par l'Exemple</h3>
          <p>
            Le Few-Shot Prompting consiste √†
            <strong>fournir 2-5 exemples concrets</strong> du format/style attendu avant de demander la g√©n√©ration. L'IA apprend le pattern par imitation.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Few-Shot ?</h4>
            <ul>
              <li>D√©finir un sch√©ma de validation pour garantir la qualit√© des donn√©es avant import</li>
              <li>Montrer la diff√©rence entre donn√©es valides et invalides</li>
              <li>G√©n√©rer des rapports de conformit√© structur√©s</li>
              <li>Cr√©er des fixtures de test avec structure sp√©cifique</li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : Valider une Structure CSV avec JSON Schema</h4>
          <button class="collapsible-btn" onclick="toggleCollapsible(this)">
            üìã Voir le Prompt Few-Shot + Exemples
          </button>
          <div class="collapsible-content">
            <div style="text-align: right; margin-bottom: 0.5rem">
              <button
                onclick="copyPrompt(this)"
                style="
                  background: #2196f3;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 0.9em;
                "
              >
                üìã Copier le prompt
              </button>
            </div>
            <div
              style="
                background: #e3f2fd;
                border-left: 4px solid #2196f3;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üîµ R√¥le</h4>
              <p>
                Tu es un expert en validation et structuration de donn√©es. Tu ma√Ætrises les sch√©mas de donn√©es (JSON Schema) et tu sais identifier les violations de qualit√© et de conformit√©.
              </p>
            </div>

            <div
              style="
                background: #e8f5e9;
                border-left: 4px solid #4caf50;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü¢ T√¢che</h4>
              <p>
                Analyse le CSV clients ci-dessous et produis :
              </p>
              <ul>
                <li>Un JSON Schema qui d√©crit les r√®gles de validit√©</li>
                <li>Un rapport d'analyse montrant quelles lignes du CSV violent le schema</li>
              </ul>
            </div>

            <div
              style="
                background: #fff9c4;
                border-left: 4px solid #ffeb3b;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü° Contexte</h4>
              <p><strong>R√®gles de Validation √† Appliquer :</strong></p>
              <ul>
                <li><strong>email</strong> : obligatoire, doit contenir @, format d'email valide</li>
                <li><strong>first_name</strong> : obligatoire, minimum 1 caract√®re</li>
                <li><strong>last_name</strong> : optionnel, si pr√©sent au moins 1 caract√®re</li>
                <li><strong>phone</strong> : optionnel, si pr√©sent au moins 5 caract√®res num√©riques</li>
                <li><strong>registration_date</strong> : format ISO YYYY-MM-DD</li>
              </ul>

              <h5 class="mt-md">CSV Clients √† Valider :</h5>
              <pre
                style="
                  background: #1e1e1e;
                  padding: 1rem;
                  border-radius: 4px;
                  overflow-x: auto;
                  font-size: 0.85em;
                "
              ><code style="color: #d4d4d4;">id,email,first_name,last_name,phone,registration_date
1,alice@company.com,Alice,Martin,+33612345678,2025-01-10
2,bob@company.com,Bob,Dupont,,2025-01-12
3,alice@company.com,Alice,Martin,+33612345678,2025-01-15
4,invalid-email,Charlie,Bernard,+33698765432,2025-01-20
5,,David,Lopez,,2025-02-01
6,eve@company.com,Eve,,+33756123456,2025-02-05
7,george@company.com,George,Garcia,123,2025-02-12
8,,Frank,Moreau,,2025-02-15</code></pre>
            </div>

            <div
              style="
                background: #ffebee;
                border-left: 4px solid #f44336;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üî¥ Contraintes</h4>
              <ul>
                <li>Le JSON Schema doit √™tre valide et v√©rifiable</li>
                <li>Chaque ligne du CSV doit √™tre √©valu√©e ind√©pendamment</li>
                <li>Le rapport doit montrer les violations ligne par ligne</li>
                <li>Le schema doit respecter exactement les 3 exemples de format ci-dessous</li>
              </ul>
            </div>

            <div
              style="
                background: #f3e5f5;
                border-left: 4px solid #9c27b0;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü£ Format</h4>
              <p>R√©ponds EXACTEMENT en 2 parties :</p>
              <pre
                style="background: #f5f5f5; padding: 1rem; border-radius: 4px; font-size: 0.8em"
              ><code>## üìã JSON Schema de Validation

{
  "type": "object",
  "properties": {
    "email": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
      "description": "Email valide avec @"
    },
    "first_name": {
      "type": "string",
      "minLength": 1
    },
    "last_name": {
      "type": ["string", "null"],
      "minLength": 1
    },
    "phone": {
      "type": ["string", "null"],
      "minLength": 5,
      "pattern": "^[0-9+\\s-]+$"
    },
    "registration_date": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    }
  },
  "required": ["email", "first_name", "registration_date"]
}

## ‚úÖ/‚ùå Rapport de Validation

Ligne 1 : ‚úÖ VALIDE
Ligne 2 : ‚úÖ VALIDE (phone optionnel)
Ligne 3 : ‚ùå ERREUR - email identique √† ligne 1 (doublon)
Ligne 4 : ‚ùå ERREUR - email invalide (pas de @)
Ligne 5 : ‚ùå ERREUR - email manquant (requis)
Ligne 6 : ‚úÖ VALIDE (last_name optionnel)
Ligne 7 : ‚ùå ERREUR - phone trop court (< 5 caract√®res)
Ligne 8 : ‚ùå ERREUR - email manquant (requis)</code></pre>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ R√©sultat Attendu avec Few-Shot</h4>
            <p>
              L'IA va g√©n√©rer un JSON Schema clair et un rapport de validation pr√©cis :
            </p>
            <ul>
              <li>Schema JSON structur√© avec type, pattern, minLength</li>
              <li>Rapport qui analyse CHAQUE LIGNE du CSV</li>
              <li>Violations explicites pour chaque erreur</li>
              <li>Distinction entre erreurs de format et erreurs m√©tier (doublon)</li>
            </ul>
            <p>
              <em
                >Sans Few-Shot, l'IA pourrait produire un schema incomplet ou un rapport sans d√©tails par ligne.</em
              >
            </p>
          </div>
        </div>

        <!-- 2.2.C : PROMPT CHAINING -->
        <div class="card mt-lg">
          <h3>C. Prompt Chaining : D√©composer en Sous-Prompts</h3>
          <p>
            Le Prompt Chaining consiste √†
            <strong
              >d√©composer une t√¢che complexe en plusieurs prompts
              s√©quentiels</strong
            >, o√π la sortie de l'un devient l'entr√©e du suivant. Utile quand une
            seule g√©n√©ration produit du code incoh√©rent ou incomplet.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Prompt Chaining ?</h4>
            <ul>
              <li>
                G√©n√©rer un pipeline ETL complet n√©cessitant extract + transform + load
              </li>
              <li>
                Cr√©er une suite de transformations o√π chaque √©tape d√©pend des donn√©es de la pr√©c√©dente
              </li>
              <li>
                Refactorer du code en plusieurs √©tapes (extraction ‚Üí renommage ‚Üí
                optimisation)
              </li>
              <li>G√©n√©rer documentation puis code √† partir de cette doc</li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : Pipeline ETL avec Extract/Transform/Load</h4>
          <p>
            Objectif : G√©n√©rer une transformation compl√®te pour "Charger et normaliser
            les donn√©es clients depuis CSV"
          </p>

          <div class="grid mt-md">
            <div class="card" style="background: #e3f2fd">
              <h4>√âtape 1Ô∏è‚É£ : Extract (Lecture CSV)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>G√©n√®re une fonction Python 
`loadCSV(filepath)` 
qui charge le CSV clients 
dans une table temp PostgreSQL
et retourne le nombre de lignes.</code></pre>
              <p>
                <strong>Sortie :</strong> Fonction r√©utilisable avec gestion
                d'erreurs
              </p>
            </div>

            <div class="card" style="background: #e8f5e9">
              <h4>√âtape 2Ô∏è‚É£ : Transform (D√©duplication)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>G√©n√®re un script SQL qui :
1. Utilise loadCSV() 
   pour charger le fichier
2. D√©duplique sur email
3. Normalise NULL/cha√Ænes vides
4. Retourne le count avant/apr√®s

Contexte : Voici la fonction 
loadCSV() :
[coller la sortie de l'√©tape 1]</code></pre>
              <p>
                <strong>Sortie :</strong> Pipeline complet avec d√©duplication +
                validation
              </p>
            </div>

            <div class="card" style="background: #fff9c4">
              <h4>√âtape 3Ô∏è‚É£ : Load (Insertion Finale)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>Ajoute la finalisation au script 
qui ins√®re les donn√©es nettoy√©es 
dans la table customers final via 
INSERT ... SELECT

Contexte : Voici le script actuel :
[coller la sortie de l'√©tape 2]</code></pre>
              <p>
                <strong>Sortie :</strong> Pipeline complet avec load atomique
              </p>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ Avantages du Chaining</h4>
            <ul>
              <li>
                <strong>Qualit√© :</strong> Chaque √©tape ETL est focalis√©e, donc
                mieux r√©alis√©e
              </li>
              <li>
                <strong>R√©utilisabilit√© :</strong> La fonction
                <code>loadCSV()</code> peut servir √† d'autres pipelines
              </li>
              <li>
                <strong>Contr√¥le :</strong> Vous validez chaque √©tape avant de
                passer √† la suivante
              </li>
              <li>
                <strong>Debugging :</strong> Si erreur, facile d'identifier
                quelle √©tape (Extract/Transform/Load) a √©chou√©
              </li>
            </ul>
          </div>

          <div class="card warning mt-md">
            <h4>‚ö†Ô∏è Chaining vs Prompt Unique</h4>
            <p>Demander tout en un seul prompt produit souvent :</p>
            <ul>
              <li>‚ùå Script monolithique difficile √† maintenir</li>
              <li>‚ùå D√©duplication/validation oubli√©es ou incompl√®tes</li>
              <li>‚ùå Gestion des transactions absente</li>
            </ul>
            <p>Le chaining force une architecture ETL modulaire et compl√®te.</p>
          </div>
        </div>
      </section>

      <!-- MESSAGE CL√â FINAL -->
      <section class="card warning mt-xl">
        <h2>üéØ Le Message Cl√© de cette Section</h2>
        <p>
          Vous ma√Ætrisez maintenant les fondamentaux du Prompt Engineering pour
          la Data Solutions :
        </p>
        <ul>
          <li>
            ‚úÖ <strong>Les 5 composantes</strong> : R√¥le, T√¢che, Contexte,
            Contraintes, Format pour g√©n√©rer SQL, Python, pipelines ETL
          </li>
          <li>
            ‚úÖ <strong>Chain-of-Thought</strong> : "Explique ton raisonnement
            √©tape par √©tape" pour analyses de qualit√© de donn√©es
          </li>
          <li>
            ‚úÖ <strong>Few-Shot</strong> : "Voici 3 exemples SQL" pour garantir un
            format de normalisation pr√©cis
          </li>
          <li>
            ‚úÖ <strong>Prompt Chaining</strong> : D√©composer un pipeline ETL (Extract ‚Üí Transform ‚Üí Load)
          </li>
        </ul>
        <p class="mt-md">
          <strong>Prochaine √©tape :</strong> Appliquer ces techniques √† vos cas
          r√©els de migration de donn√©es, transformation ETL et nettoyage de donn√©es
        </p>
      </section>

      <!-- NAVIGATION -->
      <div class="navigation mt-xl">
        <a href="../section-1/index.html" class="btn-secondary">‚Üê Section 1</a>
        <a href="../section-3/index.html" class="btn-primary"
          >Section 3 : IA et Outils de Donn√©es ‚Üí</a
        >
      </div>
    </main>

    <footer>
      <p>Formation GitHub Copilot pour les Sp√©cialistes de Solutions de Donn√©es - Section 2/4</p>
      <p>üéì Masterclass Prompt Engineering pour la Transformation de Donn√©es</p>
    </footer>

    <script>
      function toggleCollapsible(button) {
        button.classList.toggle("active");
        const content = button.nextElementSibling;
        content.classList.toggle("active");
      }

      function copyPrompt(button) {
        // R√©cup√®re le contenu du prompt (tous les textes dans les divs color√©es + le texte additionnel)
        const promptContainer = button.closest(".collapsible-content");

        // Clone le container pour manipulation sans affecter l'affichage
        const clone = promptContainer.cloneNode(true);

        // Retire le bouton de copie du clone
        const copyBtn = clone.querySelector("button");
        if (copyBtn) copyBtn.remove();

        // Extrait tout le texte
        let fullPrompt = clone.innerText.trim();

        // Copie dans le presse-papiers
        navigator.clipboard
          .writeText(fullPrompt)
          .then(() => {
            // Feedback visuel
            const originalText = button.innerHTML;
            button.innerHTML = "‚úÖ Copi√© !";
            button.style.background = "#4caf50";

            setTimeout(() => {
              button.innerHTML = originalText;
              button.style.background = "#2196f3";
            }, 2000);
          })
          .catch((err) => {
            console.error("Erreur de copie:", err);
            alert("Erreur lors de la copie. Utilisez Ctrl+C manuellement.");
          });
      }
    </script>
  </body>
</html>
